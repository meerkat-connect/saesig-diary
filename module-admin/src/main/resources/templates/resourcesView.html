<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorate="~{layout/main}">

<div layout:fragment="content" class="page-body">
    <div class="page-body">
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-block-small">
                        <ul>
                            <li class="d-inline-block m-r-10">

                                메뉴 : <i class="icofont icofont-folder"></i>
                            </li>
                            <li class="d-inline-block m-r-10">
                                기능 : <i class="icofont icofont-file-alt"></i>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="col-12">
                <div class="card">
                    <div class="card-block-small">
                        <div class="tab-content tabs p-t-20">
                            <div class="tab-pane active" id="roleJudge" role="tabpanel">
                                <div class="row">
                                    <div class="col-12 col-xl-4">
                                        <h5 class="mb-3">
                                            <strong>자원구조</strong>
                                        </h5>
                                        <div class="card">
                                            <div class="card-block-small tree-view">
                                                <div id="jstree"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-xl-8">
                                        <h5 class="mb-3">
                                            <strong>자원 상세정보</strong>
                                        </h5>
                                        <div class="card">
                                            <div class="card-block-small">
                                                <div class="mb-3 form-group row">
                                                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"
                                                           for="upperId"><strong>상위자원명</strong></label>
                                                    <div class="col-sm-12">
                                                        <input type="text" class="form-control form-control-sm"
                                                               name="upperId" id="upperId"
                                                               placeholder="Text Input Validation"/>
                                                    </div>
                                                </div>

                                                <div class="mb-3 form-group row">
                                                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"
                                                           for="roleName"><strong>Http Method Type 선택</strong></label>
                                                    <div class="col-sm-12">
                                                        <select name="httpMethod" id="httpMethod" class="form-select form-select-sm form-control-sm">
                                                            <option value="PUT">PUT</option>
                                                            <option value="GET">GET</option>
                                                            <option value="POST">POST</option>
                                                            <option value="POST">DELETE</option>
                                                            <option value="POST">POST</option>


                                                        </select>
                                                    </div>
                                                </div>

                                                <div class="mb-3 form-group row">
                                                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"
                                                           for="roleName"><strong>전체 경로</strong></label>
                                                    <div class="col-sm-12">
                                                        <input type="text" class="form-control form-control-sm"
                                                               name="roleName" id="roleName" readonly
                                                               placeholder="Text Input Validation"/>
                                                    </div>
                                                </div>

                                                <div class="mb-3 form-group row">
                                                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"
                                                           for="roleName"><strong>자원 명</strong></label>
                                                    <div class="col-sm-12">
                                                        <input type="text" class="form-control form-control-sm"
                                                               name="roleName" id="roleName"
                                                               placeholder="Text Input Validation"/>
                                                    </div>
                                                </div>
                                                <div class="mb-3 form-group row">
                                                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"
                                                           for="roleDesc"><strong>URL Path</strong></label>
                                                    <div class="col-sm-12">
                                                        <input type="text" class="form-control form-control-sm"
                                                               name="roleDesc" id="roleDesc"
                                                               placeholder="Text Input Validation"/>
                                                    </div>
                                                </div>

                                                <div class="mb-3 form-group row">
                                                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"
                                                           for="roleDesc"><strong>자원 유형 (메뉴 / 기능) </strong></label>
                                                    <div class="col-sm-12">
                                                        <input type="radio" id="resourceType" name="resourceType"/>
                                                        <label for="resourceType">메뉴</label>

                                                        <input type="radio" id="resourceType1" name="resourceType"/>
                                                        <label for="resourceType1">기능</label>
                                                    </div>
                                                </div>

                                                <!--<div class="mb-3 form-group row">
                                                    <div class="col-sm-12">
                                                        <input type="checkbox" class="js-single-small" name="useStatus"
                                                               id="useStatus" checked/>
                                                        <label for="useStatus" class="v-middle">사용여부</label>
                                                    </div>
                                                </div>-->
                                                <div class="mb-0 mt-4 form-group row">
                                                    <div class="col-sm-12">
                                                        <button class="btn btn-primary">저장</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <link rel="stylesheet" type="text/css" th:href="@{/files/assets/pages/treeview/treeview.css}"></link>
    <link rel="stylesheet" type="text/css" th:href="@{/files/bower_components/jstree/dist/themes/default/style.css}"></link>
    <script type="text/javascript" src="/files/bower_components/jstree/dist/jstree.js"></script>
    <script>
        let resources;
        $(function () {
            $.ajax({
                url: '/admin/resources',
                type: 'get',
            }).done(function (response) {
                resources = response;
                console.log(resources);
            }).fail(function (error) {
                alert(error);
            });

            $('#jstree').jstree({
                "core": {
                    'check_callback': true,
                    "themes": {
                        "responsive": true
                    },
                    "data": [
                        {
                            "text": "Parent",
                            "children": [
                                {
                                    "text": "child1",
                                    "type": "file",
                                    "id": "child1"
                                },
                                {
                                    "text": "child2",
                                    "type": "file",
                                    "id": "child2"
                                }
                            ]
                        },
                        "another"
                    ]
                },
                "types": {
                    "default": {
                        "icon": "icofont icofont-folder"
                    },
                    "file": {
                        "icon": "icofont icofont-file-alt"
                    }
                },
                'plugins': ['types', 'dnd']
            }).bind("move_node.jstree", function (e, d) {
                console.log(e);
                console.log(d);
            });
        })


    </script>

</div>
