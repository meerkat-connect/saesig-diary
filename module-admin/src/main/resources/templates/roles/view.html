<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorate="~{layout/main}">

<div layout:fragment="content">
    <div class="page-body">
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header p-b-0">
                        <ul class="nav nav-tabs md-tabs" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" data-bs-toggle="tab" role="tab" id="roleTab" aria-selected="false">역할 등록</a>
                                <div class="slide"></div>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" role="tab" id="userTab" aria-selected="false">사용자 매핑</a>
                                <div class="slide"></div>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" role="tab" id="resourceTab" aria-selected="true">자원 매핑</a>
                                <div class="slide"></div>
                            </li>
                        </ul>
                    </div>
                    <div class="card-block-small">
                        <div class="row m-b-30">
                            <div class="col-lg-12">
                                <div class="tab-content card-block" id="tabContentArea">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        $(function () {
            tabEvent();
            initTab();

        });
        const tabEvent = () => {
            $('.nav-tabs a').on('show.bs.tab', function (event) {
                const tabId = event.currentTarget.attributes.id.value;
                moveTab(tabId);
            });
        }

        const moveTab = (tabId) => {
            if(tabId == 'roleTab') {
                $('#tabContentArea').load('/admin/roles/roleView');
            } else if(tabId == 'userTab') {
                $('#tabContentArea').load('/admin/roles/memberMapping/view');
            } else if(tabId == 'resourceTab') {
                $('#tabContentArea').load('/admin/roles/resourceMapping/view');
            }
            $('#'+tabId).parent().addClass('active');
        }

        const initTab = () => {
            moveTab("roleTab");
        }

    </script>
</div>
