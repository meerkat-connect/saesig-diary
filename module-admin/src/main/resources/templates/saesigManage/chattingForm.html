<div class="card-header p-b-0">
    <h3 class="sub-title"><strong>입양기록</strong></h3>
</div>
<div class="card-block-small p-t-0">
    <div class="dt-responsive table-responsive">
        <div id="order-table_wrapper" class="dataTables_wrapper dt-bootstrap4">
            <table id="chattingListTable" class="display" style="width:100%">
                <thead>
                <tr>
                    <th>No</th>
                    <th>대화상대</th>
                    <th>분양상태</th>
                    <th>내용</th>
                    <th>상태변경일시</th>
                </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
</div>
    <!-- // -->

<script th:inline="javascript">
    $(function () {
        const chattingController = {
            init : function (){
                let chattingListTable = null;
                if (chattingListTable != null) chattingListTable.destroy()
                chattingListTable = $('#chattingListTable').DataTable({
                    "columnDefs": [
                        {className: "dt-center", targets: "_all"}
                    ],
                    stripeClasses: [],
                    pagingType: 'full_numbers',
                    lengthChange: false,
                    responsive: true,
                    searching: false,
                    destroy: true,
                    ordering: false,
                    paging: true,
                    info: false,
                    pageLength: 10,
                    bPaginate: true,
                    bAutoWidth: true,
                    serverSide: true,
                    processing: true,
                    ajax: {
                        async: false,
                        method: 'GET',
                        url: '/admin/saesigManage/selectChattingListByAdoptId.do',
                        data: function(d) {
                            d['adoptId'] = 1
                        },
                        "dataSrc": function (res) {
                            console.log(res)
                            if (res.data.length > 0){
                                return res.data;
                            }else{
                                return false;
                            }
                        }
                    },

                    columns: [
                        {data: 'id'},
                        {data : 'nickname'},
                        {render: function (data, type, row) {
                                return `${row.adoptStatus.value}`;
                            }},
                        {render: function (data, type, row) {
                                return `<button type="button" class="btn btn btn-transparent m-r-5" onclick="openChatReasonPop(`+row.id+`)">확인</button>`;
                            }},
                        {data : 'createdAt'}
                    ],
                    language: {
                        search: '검색',
                        emptyTable: '데이터가 없습니다.',
                        loadingRecords: '로딩중..',
                    },
                    drawCallback: function () {
                        var $api = this.api();
                        var pages = $api.page.info().pages;

                        if (pages === 0) {
                            $(".paginate_button").hide();
                        }
                    }
                })
            }

            ,openChatReasonPop : function(id){

            }


        }
        chattingController.init();
    });


</script>


